# codex-brainstorming-telegram

## 中文说明

这是一个基于 Go 的 Telegram 文本验证与 brainstorming 技能打包项目。

### 生成与许可声明

- 本项目整体代码由 `Codex: GPT-5.3-Codex` 生成。
- 本项目采用 `MIT` 许可证。

### 主要内容

- `cmd/telegram-echo-test`：向 Telegram 发送挑战消息并校验回包是否一致。
- `cmd/telegram-brainstorming`：单轮 prompt->reply 桥接器（传入一段 A/B/C 文本到 Telegram，等待一条回复并输出结果）。
- `skills/telegram-brainstorming/`：生产版 skill 文档（英文）与中文对照。
- `instruction_for_AI.md`：指导 AI 构建、打包、安装完整 skill。

### 平台支持

- 仅支持：Linux `amd64` / `arm64`
- 暂不支持：Windows / macOS

### 配置

根目录使用 `.env`：

- `TELEGRAM_BOT_TOKEN`
- `TELEGRAM_CHAT_ID`
- `TELEGRAM_PROXY_URL`（可选）
- `TELEGRAM_REPLY_TIMEOUT`（默认 `5m`）

如果 `.env` 不存在，程序会提示你根据 `.env.example` 创建。

### 常用命令

```bash
# 运行 Telegram 回环测试
scripts/run_telegram_echo_test.sh

# 运行单轮 Telegram brainstorming（--prompt 方式）
GOCACHE=/tmp/go-build go run ./cmd/telegram-brainstorming --env .env --prompt "请选择方案：A) 稳健 B) 平衡 C) 激进。请回复 A/B/C 或补充说明。"

# 运行单轮 Telegram brainstorming（位置参数方式）
GOCACHE=/tmp/go-build go run ./cmd/telegram-brainstorming --env .env "请选择方案：A) 稳健 B) 平衡 C) 激进。请回复 A/B/C 或补充说明。"

# 运行单轮 Telegram brainstorming（\n 会被解释为真实换行）
GOCACHE=/tmp/go-build go run ./cmd/telegram-brainstorming --env .env --prompt "请选择方案：\nA) 稳健\nB) 平衡\nC) 激进\n请回复 A/B/C。"

# 全量测试
GOCACHE=/tmp/go-build go test ./...

# 构建 Linux 二进制
mkdir -p build
CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o build/telegram-brainstorming-linux-amd64 ./cmd/telegram-brainstorming
CGO_ENABLED=0 GOOS=linux GOARCH=arm64 go build -o build/telegram-brainstorming-linux-arm64 ./cmd/telegram-brainstorming
```

---

## English

This is a Go-based project for Telegram text-path verification and brainstorming skill packaging.

### Generation and License

- The overall codebase was generated by `Codex: GPT-5.3-Codex`.
- This project is licensed under `MIT`.

### What is included

- `cmd/telegram-echo-test`: sends a challenge message to Telegram and verifies reply integrity.
- `cmd/telegram-brainstorming`: a single-round prompt->reply bridge (send long A/B/C prompt text to Telegram, wait for one reply, return reply text).
- `skills/telegram-brainstorming/`: production skill docs (English) plus Chinese reference.
- `instruction_for_AI.md`: instructions for AI to build, package, and install the full skill.

### Platform support

- Supported only: Linux `amd64` / `arm64`
- Not supported yet: Windows / macOS

### Configuration

Use `.env` in repository root:

- `TELEGRAM_BOT_TOKEN`
- `TELEGRAM_CHAT_ID`
- `TELEGRAM_PROXY_URL` (optional)
- `TELEGRAM_REPLY_TIMEOUT` (default `5m`)

If `.env` is missing, the program prints an actionable hint to create it from `.env.example`.

### Common commands

```bash
# Run Telegram echo test
scripts/run_telegram_echo_test.sh

# Run single-round Telegram brainstorming (--prompt)
GOCACHE=/tmp/go-build go run ./cmd/telegram-brainstorming --env .env --prompt "Choose one: A) Conservative B) Balanced C) Aggressive. Reply with A/B/C or short notes."

# Run single-round Telegram brainstorming (positional prompt)
GOCACHE=/tmp/go-build go run ./cmd/telegram-brainstorming --env .env "Choose one: A) Conservative B) Balanced C) Aggressive. Reply with A/B/C or short notes."

# Run single-round Telegram brainstorming (\n is converted to real line breaks)
GOCACHE=/tmp/go-build go run ./cmd/telegram-brainstorming --env .env --prompt "Choose one:\nA) Conservative\nB) Balanced\nC) Aggressive\nReply with A/B/C."

# Run all tests
GOCACHE=/tmp/go-build go test ./...

# Build Linux binaries
mkdir -p build
CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o build/telegram-brainstorming-linux-amd64 ./cmd/telegram-brainstorming
CGO_ENABLED=0 GOOS=linux GOARCH=arm64 go build -o build/telegram-brainstorming-linux-arm64 ./cmd/telegram-brainstorming
```
